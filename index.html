<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Parkour 3D ‚Äî Vers√£o √âpica (Complexa & Gigante)</title>
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600,800&display=swap" rel="stylesheet" />
  <style>
    html, body {
      min-height: 100%;
      margin: 0;
      background: radial-gradient(ellipse 120% 95% at 60% 10%, #1c2544, #071029 110%);
      font-family: 'Inter', Arial, sans-serif;
      overflow: hidden;
    }
    /* Main UI container */
    #ui {
      position: fixed;
      left: 32px;
      top: 32px;
      z-index: 50;
      color: #e6f0ff;
      background: linear-gradient(185deg, rgba(17,25,45,.82), rgba(6,18,34,0.56) 90%);
      padding: 26px 32px 22px 28px;
      border-radius: 22px;
      min-width: 340px;
      max-width: 430px;
      box-shadow: 0 8px 32px 0 rgba(42,60,122,0.16);
      border: 1.5px solid #354ea978;
      backdrop-filter: blur(14px);
      transition: background 0.28s;
      animation: fadeIn 1.2s cubic-bezier(.48,.09,.52,.91) 0.1s both;
    }

    /* Title and subtitle styles */
    .title {
      letter-spacing: .01em;
      font-weight: 900;
      font-size: 23px;
      margin-bottom: 5px;
      color: #f5f8ff;
      text-shadow: 0 2px 18px #1826a022;
      transition: color 0.3s;
      line-height: 1.1;
    }
    .subtitle {
      margin-top: 0;
      color: #a3b6e9;
      font-size: 15px;
      opacity: 0.96;
      margin-bottom: 11px;
      font-weight: 500;
      letter-spacing: 0.01em;
    }

    /* Control button bar */
    .button-bar {
      margin-top: 16px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }
    button {
      background: linear-gradient(95deg, #3a6fff 65%, #97b9fa 105%);
      color: #fff;
      border: none;
      padding: 12px 26px;
      border-radius: 12px;
      font-family: inherit;
      font-weight: 700;
      font-size: 15.6px;
      letter-spacing: .14px;
      cursor: pointer;
      outline: none;
      box-shadow: 0px 4px 20px 0px rgba(44,104,255,.19);
      transition: background 0.15s, transform 0.10s, box-shadow 0.16s;
      will-change: background, transform;
      position: relative;
      z-index: 2;
    }
    button:active {
      transform: scale(0.965);
      background: linear-gradient(94deg, #2a5de6 80%, #6fa7f4 95%);
      box-shadow: 0px 2px 9px 0px rgba(80,140,230,0.16);
    }
    /* Custom select for theme */
    select {
      padding: 8px 18px 8px 10px;
      background: #29365c;
      color: #90dcff;
      border-radius: 8px;
      font-weight: 600;
      border: 1px solid #395faa66;
      font-size: 15px;
      margin-left: 12px;
      transition: background 0.22s, color 0.22s;
      outline: none;
    }
    select:focus {
      background: #315aaa;
      color: #f4fdff;
    }

    /* Seed and status utilities */
    .muted { color: #aac7ed; font-size: 13px; opacity:.88; letter-spacing: 0.03em; margin-top: 0;}
    .muted strong { color: #8bcfff; font-weight: 700;}
    .seed-block {
      margin-top: 10px; display: flex; align-items: center; gap: 8px;
    }
    .seed-badge {
      background: #152365;
      color: #90e9ff;
      font-family: monospace;
      font-size: 15px;
      font-weight: 800;
      border-radius: 8px;
      padding: 4px 14px;
      box-shadow: 0 1.5px 4px #1a267920;
      letter-spacing: .04em;
      border: 1px solid #284793;
      user-select: all;
      transition: background 0.13s;
      cursor: pointer;
    }
    .seed-badge:active { background: #283168;}

    /* Achievements & minimap */
    .achievements-box {
      margin-top: 16px;
      background: linear-gradient(94deg, #23316e61, #1b23532e 130%);
      padding: 13px 18px 12px 15px;
      border-radius: 8px;
      border-left: 5px solid #89fcff24;
      box-shadow: 0 2px 12px #0d2d8833;
      font-size: 13.2px;
      color: #d9f3ff;
      display: flex;
      flex-direction: column;
      gap: 7px;
    }
    .achieve {
      display: flex; align-items: center; gap: 7px;
    }
    .achieve .star {
      color: #ffe152; font-size: 14px; margin-right:3px; filter: drop-shadow(0 1.5px 2px #fff59a66);
    }
    .achieve.locked .star { color: #929eb2; filter: none;}
    .achieve.locked { opacity:.69; }
    .feature-list {
      color: #b7cce9;
      font-size: 13.5px;
      margin-top: 13px;
      margin-bottom: 0;
      border-left: 2.5px solid #3a6fff44;
      padding-left: 13px;
      line-height: 1.7;
      opacity:.93;
    }

    /* Barra de progresso e minimap */
    .progress-bar {
      margin-top: 18px;
      background: #24397a;
      border-radius: 12px;
      height: 13px;
      width: 97%;
      box-shadow: 0 1px 6px #222f5924;
      overflow: hidden;
      position: relative;
    }
    .progress-bar .progress {
      height:100%; background: linear-gradient(95deg, #55dfff 35%, #3a6fff 98%);
      transition: width 0.27s cubic-bezier(.66,.21,.27,1);
    }
    .progress-bar .progress-label {
      position: absolute; left: 50%; top: -28px; transform: translateX(-50%);
      color: #b8e7ff; font-size: 13px; font-weight: 800; text-shadow: 0 1px 3px #01204455;
      letter-spacing: .05em;
    }
    .minimap {
      margin-top: 17px;
      width: 100%; background: #10173388; border-radius: 8px;
      padding: 7px 10px;
      box-shadow: 0 1.5px 8px #14236312;
      display: flex; gap: 7px; align-items: center;
    }
    .minimap .player-dot {
      width: 14px;
      height: 14px;
      border-radius: 100px;
      background: linear-gradient(105deg,#51d2fd 40%,#64bbff 100%);
      border: 2.5px solid #fff;
      box-shadow: 0 -1px 8px #1be6ff70;
      position: relative;
    }
    .minimap .chunk {
      width: 8px; height: 8px; border-radius: 50px;
      background: #5377ec; opacity: 0.66;
    }
    .minimap .chunk.rare { background: #ffe152; }

    /* HUD */
    #hud {
      position: fixed;
      right: 32px;
      top: 32px;
      color: #e6f0ff;
      z-index: 40;
      min-width: 285px;
      background: rgba(16, 28, 56, 0.67);
      padding: 18px 26px;
      border-radius: 13px;
      box-shadow: 0 2px 18px 0 rgba(42,60,122,0.12);
      font-size: 17px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 11px;
      border: 1px solid rgba(90,131,208,0.08);
      transition: background 0.3s;
      animation: fadeIn 0.9s cubic-bezier(.36,.13,.4,1) 0.75s both;
      user-select: none;
      letter-spacing: .01em;
    }
    #hud .hud-group {
      margin: 0 5px 0 0;
      display: flex; align-items: center; gap: 6px;
    }
    #hud .icon {
      font-size: 15px;
      color: #a8caff;
      margin-right:3px;
      opacity:.93;
    }

    /* Toast feedback */
    .toast {
      position: fixed; left:50%; top:8%;
      transform: translateX(-50%);
      z-index:9999; padding:14px 32px;
      background: linear-gradient(90deg, #433adf 43%, #71d1ff 120%);
      color: #f6fdff; font-size:16px;
      font-weight:600; border-radius: 16px;
      box-shadow: 0 2.5px 14px #1651be35;
      opacity: 0; pointer-events: none;
      transition: opacity 0.35s;
      animation: toast 3.5s cubic-bezier(.88,.15,.17,1) 0s forwards;
    }
    @keyframes toast { 0%{opacity:0;} 5%{opacity:.93;} 85%{opacity:.93;} 100%{opacity:0;} }

    /* Responsive adjustments */
    @media (max-width: 830px) {
      #ui,#hud {left: 8px!important; right: 8px!important; top: 8px!important;min-width:190px;max-width:94vw;padding:12px 6vw 12px 12px;}
      .minimap, .progress-bar {width:100%;}
      .title{font-size:17.5px;}
    }
    @media (max-width: 450px) {
      #hud {font-size:14px;padding:8px 6vw;}
      #ui {padding:12px 2vw;}
    }
    @keyframes fadeIn { from { opacity: 0;transform: translateY(16px) scale(.99);} to { opacity: 1; transform: none; } }
    /* Visual feedback - pulse */
    .pulse {
      animation: pulseFade .60s cubic-bezier(.6,0,.85,1) 1;
    }
    @keyframes pulseFade {
      0%   { filter: brightness(1.36) saturate(1.6); transform: scale(1.01);}
      20%  { filter: brightness(2.0)   saturate(2.1); transform: scale(1.14);}
      80%  { filter: brightness(1.2) saturate(1.15); transform: scale(0.96);}
      100% { filter: none; transform: none;}
    }
  </style>
</head>
<body>
  <!-- Painel principal -->
  <div id="ui">
    <div class="title">üåÜ Parkour 3D ‚Äî Vers√£o √âpica</div>
    <div class="subtitle">Salte, corra, ven√ßa obst√°culos<br>e descubra <b>novos desafios</b> a cada jogada!</div>
    <div class="button-bar">
      <button id="regen">Gerar mundo</button>
      <button id="toggleAI">AI Director: ON</button>
      <button id="saveSeed">Salvar seed</button>
      <select id="themePicker" title="Mudar tema">
        <option value="">Tema: Autom√°tico</option>
        <option value="City">City</option>
        <option value="Neon">Neon</option>
        <option value="Industrial">Industrial</option>
        <option value="Cloud">Cloud</option>
      </select>
    </div>
    <div class="seed-block">
      <span class="muted">Seed atual:</span> <span class="seed-badge" id="seedLabel">-</span>
      <span class="muted">(clique para copiar)</span>
    </div>

    <!-- Barra de progresso da fase -->
    <div class="progress-bar">
      <div class="progress" id="progress" style="width: 0%"></div>
      <span class="progress-label" id="progressLabel"></span>
    </div>

    <!-- Mini mapa -->
    <div class="minimap" id="minimap">
      <span class="player-dot"></span>
      <!-- Chunks e powerups s√£o renderizados dinamicamente via JS -->
    </div>

    <!-- conquistas -->
    <div class="achievements-box" id="achievements">
      <div class="achieve"><span class="star">‚òÖ</span>Primeiro salto<span class="muted">[Pular 1x]</span></div>
      <div class="achieve locked"><span class="star">‚òÖ</span>Semente rara<span class="muted">[Seed especial]</span></div>
      <div class="achieve locked"><span class="star">‚òÖ</span>Maratona<span class="muted">[500+ metros]</span></div>
    </div>
    <ul class="feature-list">
      Inclui: temas din√¢micos, chunks raros e secretos, power-ups, checkpoints (<span style="color:#8bcfff">localStorage</span>), bots com IA, minimapa, conquistas, pool de chunks e mais!
    </ul>
  </div>

  <!-- HUD detalhado -->
  <div id="hud">
    <div class="hud-group"><span class="icon">‚è±Ô∏è</span>Tempo: <span id="time">0.00</span>s</div>
    <div class="hud-group"><span class="icon">‚¨ÜÔ∏è</span>S: <span id="jumps">0</span></div>
    <div class="hud-group"><span class="icon">üéöÔ∏è</span>Dificuldade: <span id="diff">Normal</span></div>
    <div class="hud-group"><span class="icon">üß≠</span>Checkpoint: <span id="cp">0</span></div>
  </div>

  <!-- Toast para feedbacks -->
  <div id="toast" class="toast" style="display:none"></div>

  <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
  <script>
    // --- Toast helper ---
    function showToast(text) {
      var el = document.getElementById("toast");
      el.textContent = text;
      el.style.display = "block";
      el.classList.remove("pulse");
      setTimeout(() => el.classList.add("pulse"), 55);
      el.style.opacity = "1";
      setTimeout(() => { el.style.opacity = "0"; setTimeout(()=>el.style.display="none",500); }, 3400);
    }

    // --- Tema din√¢mico ---
    document.getElementById("themePicker").onchange = function(){
      // No seu JS, troque o tema do mundo/chunks por esse valor no pr√≥ximo "spawn"
      showToast("Tema trocado para: " + (this.value || "Autom√°tico"));
      // Recomenda-se guardar esse valor e aplicar quando gerar chunk/theme.
      window._selectedTheme = this.value || null;
    };

    // --- Seed: copiar ao clicar ---
    document.getElementById("seedLabel").onclick = function(){
      navigator.clipboard.writeText(this.textContent.trim());
      showToast("Seed copiada!");
    };

    // --- Achievements flags (exemplo) ---
    function unlockAchievement(idx) {
      const box = document.getElementById("achievements");
      const entries = box.querySelectorAll(".achieve");
      if (entries[idx] && entries[idx].classList.contains("locked")) {
        entries[idx].classList.remove('locked');
        showToast("Conquista desbloqueada: " + entries[idx].innerText.replace(/\[[^\]]+\]/,'').trim());
      }
    }

    // --- Barra de progresso ---
    function updateProgress(points, total) {
      const pct = Math.max(5, Math.min(97, (points*100/total)));
      document.getElementById("progress").style.width = pct + "%";
      document.getElementById("progressLabel").textContent = "Avan√ßo: " + Math.round(pct) + "%";
    }

    // --- Minimap sample renderer ---
    function refreshMinimap(playerZ, chunksArr) {
      const mm = document.getElementById("minimap");
      // Limpa chunks antigos
      [...mm.querySelectorAll('.chunk')].forEach(e=>mm.removeChild(e));
      // Player sempre √† esquerda, chunks seguem a ordem Z
      for (let i=0;i<chunksArr.length;i++) {
        const c = document.createElement('div');
        c.className = "chunk";
        if (chunksArr[i].theme && chunksArr[i].theme.specialChance > 0.04) c.classList.add("rare");
        mm.appendChild(c);
      }
    }

    // --- Pulse visual ao coletar powerup ---
    function collectPowerup(pu){
      // ...seu game logic original
      document.getElementById('hud').classList.add('pulse');
      setTimeout(()=>document.getElementById('hud').classList.remove('pulse'),520);
      unlockAchievement(0);
    }

    // --- Suas integra√ß√µes normais: ---
    // ‚Ä¢ Atualize time, jumps, diff, cp normalmente no HUD
    // ‚Ä¢ Chame updateProgress() e refreshMinimap() a cada tick/frame
    // ‚Ä¢ Use showToast("texto...") quando quiser um feedback extra

    // --- Os listeners dos bot√µes principais continuam iguais ao seu index.html original
  </script>
  <script>
    // Aqui entra SEU c√≥digo JavaScript do Parkour 3D como j√° existe, apenas:
    //  - Integre as fun√ß√µes acima,
    //  - Passe os dados para updateProgress, refreshMinimap, unlockAchievement, etc,
    //  - Use window._selectedTheme para influenciar o tema escolhido ao gerar chunks

    // Resto do seu game logic inalterado...
  </script>
</body>
</html>
